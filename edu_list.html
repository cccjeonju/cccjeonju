<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1">
	<title>전주CCC 순장교육 출석부 (강사용)</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<main>
		<h1>전주CCC 순장교육 출석부</h1>
  <!-- In the callback, you would hide the gSignInWrapper element on a
  successful sign in -->
  <div id="gSignInWrapper">
    <button id="authorize-button" style="display: none;">로그인</button>
    <button id="signout-button" style="display: none;">로그아웃</button>
  </div>
<script>
  var clientId = '62990643006-squj2admavms41d94p4gkn3ef256dfn9.apps.googleusercontent.com';

  var authorizeButton = document.getElementById('authorize-button');
  var signoutButton = document.getElementById('signout-button');
  var profile = {};

  var handleClientLoad = function() {
    gapi.load('auth2', function(){
      // Retrieve the singleton for the GoogleAuth library and set up the client.
      auth2 = gapi.auth2.init({
        client_id: clientId,
        cookiepolicy: 'single_host_origin',
        // Request scopes in addition to 'profile' and 'email'
        //scope: 'additional_scope'
      }).then( function () {
      	// Listen for sign-in state changes.
      	gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

      	// Handle the initial sign-in state.
      	updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());

      	authorizeButton.onclick = handleAuthClick;
        signoutButton.onclick = handleSignoutClick;
      });
      
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          authorizeButton.style.display = 'none';
          signoutButton.style.display = 'block';
          makeApiCall();
        } else {
          authorizeButton.style.display = 'block';
          signoutButton.style.display = 'none';
        }
      }
      function handleAuthClick(event) {
        gapi.auth2.getAuthInstance().signIn();
      }
      function handleSignoutClick(event) {
        gapi.auth2.getAuthInstance().signOut();
      }

	  // Load the API and make an API call.  Display the results on the screen.
      function makeApiCall() {
        if (gapi.auth2.getAuthInstance().isSignedIn.get()) {
          profile = gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();
          var p = document.createElement('span');
          var name = profile.getName();
          var email = profile.getEmail();
          p.appendChild(document.createTextNode('환영합니다, '+name+'님 ('+email+') '));
          authorizeButton.prependTo(p);
        }
      }
    });
  }

</script>
		<p class="guide">1. 자신의 강의를 선택하시면 출석한 학생들 명단을 읽어옵니다.<br>
		2. 실제 출석한 학생의 이름 옆에 있는 박스에 <span style="font-weight:bold;text-decoration:underline;">체크</span> 해주세요.<br>
		3. 맨 아래에 있는 <span style="font-weight:bold;text-decoration:underline;">출석 확인</span>을 클릭하시면 출석처리가 완료됩니다.<br>
		4. 출석 확인은 다시 수정하실 수 있습니다.<br>
		5. 회비납부는 아래와 같이 처리하셔야 합니다.<br></p>
		
		<h2> 강의 선택 </h2>
		<input type="date" id="date"> <input type="type" id="checker">
		<select id="subjectCode">
			<option>강의를 선택하세요</option>
		</select>
		<table>
			<thead>
				<tr class="">
					<th class="co1"><input type="checkbox" id="checkAll"><!--전체선택--></th>
					<th class="co2"><!--번호--></th>
					<th class="co3">이름</th>
					<th class="co4">순장</th>
					<th class="co5">성별</th>
					<th class="co6">학년</th>
					<th class="co7">학교</th>
					<th class="co8">학번</th>
					<th class="co9">회비</th>
				</tr>
			</thead>
			<tbody class="studentList">
				<tr class="">
					<td colspan="9" class="blankTr">강의를 선택하시면 명단을 불러옵니다.</td>
				</tr>
			</tbody>
		</table>
		<p><button type="button" id="attendBtn" style="display:none;" disabled>출석 확인</button></p>

		<ul class="copyright">
			<li>Copyright &copy; 2017 Heejin Lee</li>
			<li><a href="https://goo.gl/forms/EwN5b6HKiXI3XQ6v1">오류 신고</a></li>
			<li><a href="edu_attend.html">학생용 출석부</a></li>
		</ul>

	</main>
	<div class="loading-container">
		<div class="loader">Loading...</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script src="script_list.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>
</body>
</html>
